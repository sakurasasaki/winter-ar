<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Winter AR</title>

    <!-- MindAR & three.js -->
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.1.5/dist/mindar-image-three.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>

    <style>
      body, html {
        margin: 0;
        padding: 0;
        background: #000;
        color: #fff;
        font-family: system-ui, sans-serif;
        text-align: center;
      }
      #start-screen {
        width: 100vw;
        height: 100vh;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        gap: 16px;
      }
      #start-button {
        padding: 12px 24px;
        font-size: 18px;
        border-radius: 999px;
        border: none;
        background: #1e90ff;
        color: #fff;
      }
      #start-button:active {
        opacity: 0.8;
      }
      #ar-container {
        width: 100vw;
        height: 100vh;
        display: none;
      }
    </style>
  </head>

  <body>
    <!-- ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ -->
    <div id="start-screen">
      <div>ğŸ“± ã‚«ãƒ¡ãƒ©ã‚’ä½¿ã£ãŸARã‚’èµ·å‹•ã—ã¾ã™</div>
      <div>ã€ŒSTARTã€ã‚’æŠ¼ã—ã¦ã‹ã‚‰ã€å†¬æœŸè¬›ç¿’ãƒãƒ©ã‚·ã«ã‹ã–ã—ã¦ã­</div>
      <button id="start-button">AR START</button>
    </div>

    <!-- ARè¡¨ç¤ºç”¨ã‚³ãƒ³ãƒ†ãƒŠ -->
    <div id="ar-container"></div>

    <script>
      const startScreen = document.getElementById("start-screen");
      const startButton = document.getElementById("start-button");
      const arContainer = document.getElementById("ar-container");

      startButton.addEventListener("click", async () => {
        // ã‚¹ã‚¿ãƒ¼ãƒˆç”»é¢ã‚’éš ã—ã¦ARç”»é¢ã‚’è¡¨ç¤º
        startScreen.style.display = "none";
        arContainer.style.display = "block";

        // MindARã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
        const mindarThree = new window.MINDAR.MindARThree({
          container: arContainer,
          imageTargetSrc: "./winter2025.mind",  // ã•ã£ãä½œã£ãŸ .mind
        });

        const { renderer, scene, camera } = mindarThree;

        // å¡¾é•·PNGã‚’èª­ã¿è¾¼ã¿ï¼ˆjuku.pngï¼‰
        const loader = new THREE.TextureLoader();
        loader.load("./juku.png", (texture) => {
          const material = new THREE.MeshBasicMaterial({
            map: texture,
            transparent: true,
          });

          // ç¸¦é•·ãªç”»åƒãªã®ã§ã€æ¯”ç‡ã‚’å°‘ã—ç¸¦é•·ã«
          const geometry = new THREE.PlaneGeometry(1, 1.8);
          const mesh = new THREE.Mesh(geometry, material);

          // ä½ç½®ã¨ã‚µã‚¤ã‚ºã‚’å°‘ã—èª¿æ•´
          mesh.position.set(0, 0.1, 0);
          mesh.scale.set(1.2, 1.2, 1.2);

          const anchor = mindarThree.addAnchor(0);
          anchor.group.add(mesh);
        });

        // ARé–‹å§‹
        await mindarThree.start();
        renderer.setAnimationLoop(() => {
          renderer.render(scene, camera);
        });
      });
    </script>
  </body>
</html>
